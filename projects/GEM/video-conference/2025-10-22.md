# VCF Stories - Detailed Sub-tasks Breakdown

> **Implementation**: Using Jitsi Meet Docker (https://github.com/jitsi/docker-jitsi-meet)
> **Date**: 2025-10-22

## üéØ Current Stories Implementation Plan

### VCF-12 Record meeting (Story) - 10 Story Points

**Priority**: Low | **Dependencies**: VCF-9 | **Status**: üî¥ Not Started

#### Sub-tasks:

1. **[Docker] Setup Jibri service** (3 SP)
   - Configure Jibri container in docker-compose.yml
   - Set up recording storage volume
   - Configure Jibri environment variables
   - Test Jibri service startup

2. **[Backend] Recording API endpoints** (3 SP)
   - `/meeting/:id/record/start` - Start recording
   - `/meeting/:id/record/stop` - Stop recording
   - `/meeting/:id/record/status` - Get recording status
   - Host role validation middleware

3. **[Frontend] Recording controls UI** (2 SP)
   - Start/Stop recording button (host only)
   - Recording status indicator
   - Recording list in meeting details
   - Download recording functionality

4. **[Integration] Jibri-Jitsi integration** (2 SP)
   - Configure Jitsi to use Jibri for recording
   - Handle recording events and callbacks
   - File upload to storage service
   - Recording metadata management

---

### VCF-11 Join meeting room using ID and Password (Story) - 5 Story Points

**Priority**: Medium | **Dependencies**: VCF-9 | **Status**: üî¥ Not Started

#### Sub-tasks:

1. **[Frontend] Join meeting form** (2 SP)
   - Meeting ID input field
   - Password input field
   - Form validation and error handling
   - Loading states and user feedback

2. **[Backend] Meeting validation API** (2 SP)
   - `/meeting/join` endpoint
   - Password hash verification
   - Meeting existence validation
   - JWT token generation for participants

3. **[Frontend] Meeting room integration** (1 SP)
   - Redirect to Jitsi meeting room
   - Pass authentication token to Jitsi
   - Handle join success/failure scenarios
   - Participant role assignment

---

### VCF-10 Join meeting room as Guest (Story) - 6 Story Points

**Priority**: Medium | **Dependencies**: VCF-9 | **Status**: üî¥ Not Started

#### Sub-tasks:

1. **[Frontend] Guest join form** (2 SP)
   - Name input field
   - Meeting ID input field
   - Optional email field
   - Guest-specific UI styling

2. **[Backend] Guest request system** (2 SP)
   - `/meeting/join-guest` endpoint
   - Guest request validation
   - Host notification system
   - Temporary guest token generation

3. **[Frontend] Host approval modal** (2 SP)
   - Real-time guest request notifications
   - Approve/Reject buttons
   - Guest information display
   - WebSocket integration for real-time updates

---

### VCF-9 Create meeting room (Logged in user only) (Story) - 8 Story Points

**Priority**: High | **Dependencies**: VCF-8 | **Status**: üî¥ Not Started

#### Sub-tasks:

1. **[Frontend] Create meeting form** (3 SP)
   - Meeting title, description fields
   - Password setting (optional)
   - Start time and duration pickers
   - Form validation and error handling

2. **[Backend] Meeting creation API** (3 SP)
   - `/meeting/create` endpoint
   - Unique meeting ID generation
   - Password hashing (bcrypt)
   - Host JWT token generation

3. **[Docker] Jitsi room configuration** (2 SP)
   - Configure Jitsi Meet for custom rooms
   - Set up room authentication
   - Configure host privileges
   - Test room creation and joining

---

### VCF-8 Logout Teams ID (Story) - 3 Story Points

**Priority**: High | **Dependencies**: VCF-7 | **Status**: üü° In Progress

#### Sub-tasks:

1. **[Frontend] Logout button** (1 SP)
   - Add logout button to user profile
   - Confirmation modal
   - Clear local storage
   - Loading state during logout

2. **[Backend] Session invalidation** (1 SP)
   - Microsoft Graph logout API call
   - Server-side session clearing
   - Token invalidation
   - Error handling

3. **[Frontend] Post-logout handling** (1 SP)
   - Redirect to login page
   - Clear application state
   - Reset user context
   - Handle logout errors gracefully

---

## üê≥ Docker & Jitsi Implementation Details

### Required Docker Services:

- **jitsi/web** - Web interface
- **jitsi/prosody** - XMPP server
- **jitsi/jicofo** - Conference focus
- **jitsi/jvb** - Video bridge
- **jitsi/jibri** - Recording service
- **jitsi/jigasi** - SIP gateway (optional)

### Key Configuration Files:

- `docker-compose.yml` - Service orchestration
- `.env` - Environment variables
- `jitsi-meet.cfg` - Jitsi Meet configuration
- `prosody.cfg.lua` - Prosody XMPP configuration

### Integration Points:

- Custom authentication with Teams SSO
- Room creation and management
- Host privilege assignment
- Recording service integration
- Guest access control

---

## üìã Implementation Priority

1. **VCF-8** (Logout) - Foundation for authentication
2. **VCF-9** (Create Meeting) - Core meeting functionality
3. **VCF-10** (Guest Join) - Access control
4. **VCF-11** (Password Join) - Security features
5. **VCF-12** (Recording) - Advanced features

---

## üîß Technical Stack

- **Frontend**: React + Jitsi Meet API
- **Backend**: Node.js + Express
- **Database**: PostgreSQL
- **Authentication**: Microsoft Teams SSO + JWT
- **Video**: Jitsi Meet Docker
- **Storage**: MinIO/Supabase for recordings
- **Real-time**: WebSocket for notifications
